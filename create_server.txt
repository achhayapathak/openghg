Commands run

sudo apt-get update && sudo apt-get upgrade
# Unsure if this is needed
sudo reboot
sudo apt-get install build-essential python3 python3-dev python3-venv python3-pip iptables-persistent git ufw vim

# Delete the reject all with icmp unavailable
sudo iptables -D INPUT 6
# Setup and enable ufw
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow http
sudo ufw allow https
sudo ufw allow ssh
sudo ufw enable

sudo su -i
iptables-save > /etc/iptables/rules.v4
exit

# Create an SSH key pair
ssh-keygen -b 4096 -t rsa

git clone git@github.com:gareth-j/the-littlest-jupyterhub.git
cd the-littlest-jupyterhub
git checkout addInstall
cd ..

Use the patched firstuseauthenticator and run

sudo /opt/tljh/user/bin/pip install .

# Create a jupyter_reqs file that contains the following

# HUGS requirements
pandas
numpy
matplotlib
bqplot
ipywidgets>7.5
ipyleaflet
voila
# Still get python 3.6
backports-datetime-fromisoformat

# Acquire requirements
pyotp
cachetools
pyyaml
qrcode[pil]
tblib
cryptography
requests

# Install TLJH
sudo python3 -E the-littlest-jupyterhub/bootstrap/bootstrap.py --admin gar --user-requirements-txt-url /home/ubuntu/jupyter_reqs.txt





sudo iptables -D INPUT 6